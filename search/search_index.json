{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Actions Python","text":"<p>          This project is forked from open-turo/actions-python      <p>     GitHub Action for `python` based repositories. It uses `pip` as package manager.     </p> </p> <p> </p> <p>Documentation: https://armand-sauzay.github.io/actions-python/</p> <p>Source Code: https://github.com/armand-sauzay/actions-python</p>"},{"location":"#actions","title":"Actions","text":""},{"location":"#action-lint","title":"action: <code>lint</code>","text":"<p>Lint will run pre-commit linters against the consumer repository, optionally checking out to to the consumer repository.</p> <p>See usage here.</p> <p>Documentation is found here.</p>"},{"location":"#action-test","title":"action: <code>test</code>","text":"<p>Test will run tests in the consumer repository using pytest. This action will also check out the repository if <code>checkout-repo</code> is passed, as well as <code>pip install .[dev]</code> and <code>pip install .[test]</code> for dependencies.</p> <p>See usage here.</p> <p>Documentation is found here.</p>"},{"location":"#action-release","title":"action: <code>release</code>","text":"<p>Release will optionally checkout the consumer repository and attempt a Semantic Release using the root level configuration file (e.g. .releaserc.json) indicating branches and plugins to use to facilitate the release.</p> <p>See usage here.</p> <p>Documentation is found here.</p>"},{"location":"#get-help","title":"Get Help","text":"<p>Each Action has a detailed README for how to use it as referenced above. Please review Issues, post new Issues against this repository as needed.</p>"},{"location":"setup/","title":"Set up your repository","text":"<p>Once you have created a repository, you can set up your repository to use the actions in this repo.</p> <p>Usually, in most CI/CD workflows, you'll need two actions:</p> <ul> <li><code>CI</code> to run lint and test on every push</li> <li><code>Release</code> to run lint, test and release on every push to <code>main</code> or <code>master</code></li> </ul>"},{"location":"setup/#required-files-in-your-repo-for-the-actions-to-work","title":"Required files in your repo for the actions to work","text":"<p>The actions in this repo require the following files to be present in your repository:</p> <ul> <li>.commitlintrc.yaml</li> <li>.pre-commit-config.yaml</li> <li>.releaserc.json</li> </ul> <p>You can copy the files below and paste them in your repository:</p>"},{"location":"setup/#commitlintrcyaml","title":".commitlintrc.yaml","text":"<pre><code>extends:\n  - \"@commitlint/config-conventional\"\n</code></pre>"},{"location":"setup/#pre-commit-configyaml","title":".pre-commit-config.yaml","text":"<pre><code>repos:\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.3.0\n    hooks:\n      - id: check-yaml\n      - id: end-of-file-fixer\n      - id: trailing-whitespace\n  - repo: https://github.com/alessandrojcm/commitlint-pre-commit-hook\n    rev: v9.0.0\n    hooks:\n      - id: commitlint\n        stages: [commit-msg]\n        additional_dependencies: [\"@commitlint/config-conventional\"]\n  - repo: https://github.com/python/black.git\n    rev: 22.6.0\n    hooks:\n      - id: black\n        language_version: python3\n  - repo: https://github.com/pycqa/flake8.git\n    rev: 3.9.2\n    hooks:\n      - id: flake8\n        additional_dependencies:\n          - flake8-black&gt;=0.1.1\n        language_version: python3\n  - repo: https://github.com/PyCQA/isort\n    rev: 5.12.0\n    hooks:\n      - id: isort\n  - repo: https://github.com/pre-commit/mirrors-prettier\n    rev: v2.7.1\n    hooks:\n      - id: prettier\n        stages: [commit]\n  - repo: https://github.com/rhysd/actionlint\n    rev: v1.6.17\n    hooks:\n      - id: actionlint\n  - repo: https://github.com/jumanjihouse/pre-commit-hooks\n    rev: 3.0.0 # or specific git tag\n    hooks:\n      - id: shellcheck\n      - id: shfmt\n  - repo: https://github.com/pre-commit/mirrors-mypy\n    rev: 0b037c2b59aa62dc3be3287d175295f1a5547eb9\n    hooks:\n      - id: mypy\n        args: [--strict, --ignore-missing-imports, --allow-untyped-decorators]\n        exclude: tests/\n</code></pre>"},{"location":"setup/#releasercjson","title":".releaserc.json","text":"<pre><code>{\n  \"branches\": [\"main\"],\n  \"plugins\": [\n    \"@semantic-release/commit-analyzer\",\n    \"@semantic-release/release-notes-generator\",\n    \"@semantic-release/github\"\n  ]\n}\n</code></pre>"},{"location":"setup/#ci","title":"CI","text":"<p>To set up CI, you need to create a workflow file in <code>.github/workflows/ci.yaml</code> with the following content:</p> <pre><code>name: CI\n\non:\n  workflow_dispatch:\n  push:\n\njobs:\n  lint:\n    name: Lint\n    runs-on: ubuntu-latest\n    steps:\n      - uses: armand-sauzay/actions-python/lint@v1\n\n  test:\n    name: Test\n    runs-on: ubuntu-latest\n    steps:\n      - uses: armand-sauzay/actions-python/test@v1\n</code></pre> <p>You can just copy and paste this content in your <code>.github/workflows/ci.yaml</code> file.</p>"},{"location":"setup/#release","title":"Release","text":"<p>To set up Release, you need to create a workflow file in <code>.github/workflows/release.yaml</code> with the following content:</p> <pre><code>name: Release\n\non:\n  workflow_dispatch:\n  push:\n    branches:\n      - main\n      - master\n\njobs:\n  lint:\n    name: Lint\n    runs-on: ubuntu-latest\n    steps:\n      - uses: armand-sauzay/actions-python/lint@v1\n\n  test:\n    name: Test\n    runs-on: ubuntu-latest\n    steps:\n      - uses: armand-sauzay/actions-python/test@v1\n\n  release:\n    name: Release\n    runs-on: ubuntu-latest\n    steps:\n      - uses: armand-sauzay/actions-python/release@v1\n</code></pre>"},{"location":"actions/lint/","title":"Lint","text":"<p>If you want more details on how to add this action to your repository, please see the setup documentation.</p>"},{"location":"actions/lint/#description","title":"Description","text":"<p>GitHub Action that lints a python based repository.</p>"},{"location":"actions/lint/#usage","title":"Usage","text":"<pre><code>jobs:\n  build:\n    steps:\n      - name: Lint\n        uses: armand-sauzay/actions-python/lint@v1\n        with:\n          ## example value for github-token provided below\n          github-token: ${{ secrets.GITHUB_TOKEN }}\n</code></pre>"},{"location":"actions/lint/#inputs","title":"Inputs","text":"parameter description required default checkout-repo Perform checkout as first step of action <code>false</code> true pypi-token PyPI token that can checkout the repository as well as create tags/releases against it. e.g. 'secrets.PYPI_TOKEN' <code>false</code> github-token GitHub token that can checkout the repository. e.g. 'secrets.GITHUB_TOKEN' <code>true</code> ${{ github.token }}"},{"location":"actions/lint/#runs","title":"Runs","text":"<p>This action is an <code>composite</code> action.</p>"},{"location":"actions/lint/#lint-checks","title":"Lint Checks","text":"<p>This action runs pre-commit.</p>"},{"location":"actions/lint/#notes","title":"Notes","text":"<ul> <li>By default, this action will perform actions/checkout as its first step.</li> <li>This expects that <code>.commitlintrc.yaml</code> will be present to enforce <code>conventional-commit</code>.</li> </ul>"},{"location":"actions/release/","title":"Release","text":"<p>If you want more details on how to add this action to your repository, please see the setup documentation.</p>"},{"location":"actions/release/#description","title":"Description","text":"<p>GitHub Action that publishes a new release.</p>"},{"location":"actions/release/#configuration","title":"Configuration","text":""},{"location":"actions/release/#step1-set-any-semantic-release-configuration-in-your-repository","title":"Step1: Set any Semantic Release Configuration in your repository.","text":""},{"location":"actions/release/#step2-add-secrets-in-your-repository-for-the-semantic-release-authentication-environment-variables","title":"Step2: Add Secrets in your repository for the Semantic Release Authentication Environment Variables.","text":""},{"location":"actions/release/#step3-add-a-workflow-file-to-your-repository-to-create-custom-automated-processes","title":"Step3: Add a Workflow File to your repository to create custom automated processes.","text":""},{"location":"actions/release/#usage","title":"Usage","text":"<pre><code>steps:\n  - name: Release\n    uses: armand-sauzay/actions-python/release@v1\n    with:\n      ## example value for github-token provided below\n      github-token: ${{ secrets.GITHUB_TOKEN }}\n</code></pre> <p>IMPORTANT: <code>GITHUB_TOKEN</code> does not have the required permissions to operate on protected branches. If you are using this action for protected branches, replace <code>GITHUB_TOKEN</code> with Personal Access Token. If using the <code>@semantic-release/git</code> plugin for protected branches, avoid persisting credentials as part of <code>actions/checkout@v3</code> by setting the parameter <code>persist-credentials: false</code>. This credential does not have the required permission to operate on protected branches.</p>"},{"location":"actions/release/#inputs","title":"Inputs","text":"parameter description required default checkout-repo Perform checkout as first step of action <code>false</code> true dry-run Whether to run semantic release in <code>dry-run</code> mode. It will override the <code>dryRun</code> attribute in your configuration file <code>false</code> <code>false</code> extra-plugins Extra plugins for pre-install. You can also specify specifying version range for the extra plugins if you prefer. <code>false</code> github-token GitHub token that can checkout the repository as well as create tags/releases against it. e.g. 'secrets.GITHUB_TOKEN' <code>true</code>"},{"location":"actions/release/#outputs","title":"Outputs","text":"parameter description new-release-published Whether a new release was published new-release-version Version of the new release new-release-major-version Major version of the new release"},{"location":"actions/release/#runs","title":"Runs","text":"<p>This action is an <code>composite</code> action.</p>"},{"location":"actions/release/#additional-examples","title":"Additional Examples","text":""},{"location":"actions/release/#extra-plugins-example","title":"extra-plugins example","text":"<p>The Action can be used with <code>extra-plugins</code> option to specify plugins which are not in the default list of plugins of semantic release. When using this option, please make sure that these plugins are also mentioned in your semantic release config's plugins array.</p> <p>For example, if you want to use <code>@semantic-release/git</code> and <code>@semantic-release/changelog</code> extra plugins, these must be added to <code>extra-plugins</code> in your actions file and <code>plugins</code> in your release config file as shown bellow:</p> <p>Github Action Workflow:</p> <pre><code>steps:\n  - name: Release\n    uses: armand-sauzay/actions-python/release@v1\n    with:\n      # You can specify specifying version range for the extra plugins if you prefer.\n      github-token: ${{ secrets.GITHUB_TOKEN }}\n      extra-plugins: |\n        @semantic-release/changelog@3.0.0\n        @semantic-release/git\n</code></pre> <p>Similar to parameter <code>semantic_version</code>. It is recommended to manually specify a version of semantic-release plugins to prevent errors caused.</p> <p>Release Config:</p> <pre><code>  plugins: [\n    .\n+   \"@semantic-release/changelog\"\n+   \"@semantic-release/git\",\n  ]\n</code></pre>"},{"location":"actions/release/#dry-run-example","title":"dry-run example","text":"<pre><code>jobs:\n  build:\n    steps:\n      - name: Release\n        uses: armand-sauzay/actions-python/release@v1\n        with:\n          dry-run: true\n          github-token: ${{ secrets.GITHUB_TOKEN }}\n</code></pre>"},{"location":"actions/release/#using-output-parameters-example","title":"using output parameters example","text":"<pre><code>jobs:\n  build:\n    steps:\n      - name: Release\n        uses: armand-sauzay/actions-python/release@v1\n        id: semantic # Need an `id` for output variables\n        with:\n          github-token: ${{ secrets.GITHUB_TOKEN }}\n      - name: Do something when a new release published\n        if: steps.semantic.outputs.new-release-published == 'true'\n        run: |\n          echo ${{ steps.semantic.outputs.new-release-version }}\n          echo ${{ steps.semantic.outputs.new-release-major-version }}\n</code></pre>"},{"location":"actions/release/#notes","title":"Notes","text":"<ul> <li>By default, this action will perform actions/checkout as its first step.</li> </ul>"},{"location":"actions/test/","title":"Test","text":"<p>If you want more details on how to add this action to your repository, please see the setup documentation.</p>"},{"location":"actions/test/#description","title":"Description","text":"<p>GitHub Action for running tests in a Python repository using pytest. This action will also check out the repository if <code>checkout-repo</code> is passed, as well as <code>pip install .[dev]</code> and <code>pip install .[test]</code> for dependencies.</p>"},{"location":"actions/test/#usage","title":"Usage","text":"<pre><code>jobs:\n  test:\n    steps:\n      - name: Test\n        uses: armand-sauzay/actions-python/test@v1\n        with:\n          ## example value for github-token provided below\n          github-token: ${{ secrets.GITHUB_TOKEN }}\n</code></pre>"},{"location":"actions/test/#inputs","title":"Inputs","text":"parameter description required default checkout-repo Perform checkout as first step of action <code>false</code> true github-token GitHub token that can checkout the repository. e.g. 'secrets.GITHUB_TOKEN' <code>true</code> ${{ github.token }} pypi-token PyPI token that can checkout the repository as well as create tags/releases against it. e.g. 'secrets.PYPI_TOKEN' <code>false</code> test-flags Flags and args for test command <code>false</code>"},{"location":"actions/test/#runs","title":"Runs","text":"<p>This action is an <code>composite</code> action.</p>"},{"location":"actions/test/#test_1","title":"Test","text":"<p>It will run:</p> <pre><code>pytest ${test-flags}\n</code></pre>"},{"location":"actions/test/#notes","title":"Notes","text":"<ul> <li>By default, this action will perform actions/checkout as its first step.</li> </ul>"},{"location":"files/commitlintrc/","title":".commitlintrc.yaml","text":"<p>In order to use commitlint, you need to install it first. See commitlint for more information.</p> <p>You then have to add the following configuration to your <code>.commitlintrc.yaml</code> file, in order to use the conventional commit convention:</p> <pre><code>extends:\n  - \"@commitlint/config-conventional\"\n</code></pre>"},{"location":"files/pre-commit-config/","title":".pre-commit-config.yaml","text":"<p>In order to use pre-commit, you need to install it first. See pre-commit documentation for more information.</p> <p>Once you have installed pre-commit, you can add the following (or any other hook that you want to have) configuration to your <code>.pre-commit-config.yaml</code> file:</p> <pre><code>repos:\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.3.0\n    hooks:\n      - id: check-yaml\n      - id: end-of-file-fixer\n      - id: trailing-whitespace\n  - repo: https://github.com/alessandrojcm/commitlint-pre-commit-hook\n    rev: v9.0.0\n    hooks:\n      - id: commitlint\n        stages: [commit-msg]\n        additional_dependencies: [\"@commitlint/config-conventional\"]\n  - repo: https://github.com/python/black.git\n    rev: 22.6.0\n    hooks:\n      - id: black\n        language_version: python3\n  - repo: https://github.com/pycqa/flake8.git\n    rev: 3.9.2\n    hooks:\n      - id: flake8\n        additional_dependencies:\n          - flake8-black&gt;=0.1.1\n        language_version: python3\n  - repo: https://github.com/PyCQA/isort\n    rev: 5.12.0\n    hooks:\n      - id: isort\n  - repo: https://github.com/pre-commit/mirrors-prettier\n    rev: v2.7.1\n    hooks:\n      - id: prettier\n        stages: [commit]\n  - repo: https://github.com/rhysd/actionlint\n    rev: v1.6.17\n    hooks:\n      - id: actionlint\n  - repo: https://github.com/jumanjihouse/pre-commit-hooks\n    rev: 3.0.0 # or specific git tag\n    hooks:\n      - id: shellcheck\n      - id: shfmt\n  - repo: https://github.com/pre-commit/mirrors-mypy\n    rev: 0b037c2b59aa62dc3be3287d175295f1a5547eb9\n    hooks:\n      - id: mypy\n        args: [--strict, --ignore-missing-imports, --allow-untyped-decorators]\n        exclude: tests/\n</code></pre>"},{"location":"files/releaserc/","title":".releaserc.json","text":"<p>In order to use semantic-release, you need to install it first. See semantic-release for more information.</p> <p>You then have to add the following configuration to your <code>.releaserc.json</code> file, in order to have the following plugins:</p> <pre><code>{\n  \"branches\": [\"main\"],\n  \"plugins\": [\n    \"@semantic-release/commit-analyzer\",\n    \"@semantic-release/release-notes-generator\",\n    \"@semantic-release/github\"\n  ]\n}\n</code></pre>"}]}